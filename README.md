<div align="center">
  <a href="https://v2.nonebot.dev/store"><img src="docs/nbp_logo.png" width="180" height="180" alt="NoneBotPluginLogo"></a>
  <br>
  <p><img src="docs/NoneBotPlugin.svg" width="240" alt="NoneBotPluginText"></p>
</div>

<div align="center">

# nonebot-plugin-bilichat

_âœ¨ å¤šåŠŸèƒ½çš„Bç«™è§†é¢‘è§£æå·¥å…· âœ¨_

<a href="./LICENSE">
    <img src="https://img.shields.io/github/license/djkcyl/nonebot-plugin-bilichat.svg" alt="license">
</a>

<a href="https://pypi.python.org/pypi/nonebot-plugin-bilichat">
  <img alt="PyPI - Downloads" src="https://img.shields.io/pypi/dm/nonebot-plugin-bilichat">
</a>

<a href="https://pypi.python.org/pypi/nonebot-plugin-bilichat">
    <img src="https://img.shields.io/pypi/v/nonebot-plugin-bilichat.svg" alt="pypi">
</a>

<img src="https://img.shields.io/badge/python-3.8+-blue.svg" alt="python">

<a href="https://pdm.fming.dev">
    <img src="https://img.shields.io/badge/pdm-managed-blueviolet" alt="pdm-managed">
</a>

<a href="https://github.com/psf/black">
    <img src="https://img.shields.io/badge/code%20style-black-000000.svg" alt="Code style: black">
</a>

<a href="https://onebot.dev/">
  <img src="https://img.shields.io/badge/OneBot-v11-black?style=social&logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABABAMAAABYR2ztAAAAIVBMVEUAAAAAAAADAwMHBwceHh4UFBQNDQ0ZGRkoKCgvLy8iIiLWSdWYAAAAAXRSTlMAQObYZgAAAQVJREFUSMftlM0RgjAQhV+0ATYK6i1Xb+iMd0qgBEqgBEuwBOxU2QDKsjvojQPvkJ/ZL5sXkgWrFirK4MibYUdE3OR2nEpuKz1/q8CdNxNQgthZCXYVLjyoDQftaKuniHHWRnPh2GCUetR2/9HsMAXyUT4/3UHwtQT2AggSCGKeSAsFnxBIOuAggdh3AKTL7pDuCyABcMb0aQP7aM4AnAbc/wHwA5D2wDHTTe56gIIOUA/4YYV2e1sg713PXdZJAuncdZMAGkAukU9OAn40O849+0ornPwT93rphWF0mgAbauUrEOthlX8Zu7P5A6kZyKCJy75hhw1Mgr9RAUvX7A3csGqZegEdniCx30c3agAAAABJRU5ErkJggg==" alt="onebot">
</a>
<a href="https://onebot.dev/">
  <img src="https://img.shields.io/badge/OneBot-v12-black?style=social&logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABABAMAAABYR2ztAAAAIVBMVEUAAAAAAAADAwMHBwceHh4UFBQNDQ0ZGRkoKCgvLy8iIiLWSdWYAAAAAXRSTlMAQObYZgAAAQVJREFUSMftlM0RgjAQhV+0ATYK6i1Xb+iMd0qgBEqgBEuwBOxU2QDKsjvojQPvkJ/ZL5sXkgWrFirK4MibYUdE3OR2nEpuKz1/q8CdNxNQgthZCXYVLjyoDQftaKuniHHWRnPh2GCUetR2/9HsMAXyUT4/3UHwtQT2AggSCGKeSAsFnxBIOuAggdh3AKTL7pDuCyABcMb0aQP7aM4AnAbc/wHwA5D2wDHTTe56gIIOUA/4YYV2e1sg713PXdZJAuncdZMAGkAukU9OAn40O849+0ornPwT93rphWF0mgAbauUrEOthlX8Zu7P5A6kZyKCJy75hhw1Mgr9RAUvX7A3csGqZegEdniCx30c3agAAAABJRU5ErkJggg==" alt="onebot">
</a>

<a href="https://jq.qq.com/?_wv=1027&k=5OFifDh">
  <img src="https://img.shields.io/badge/QQ%E7%BE%A4-768887710-orange?style=flat-square" alt="QQ Chat Group">
</a>
<a href="https://jq.qq.com/?_wv=1027&k=7LWx6q4J">
  <img src="https://img.shields.io/badge/QQ%E7%BE%A4-720053992-orange?style=flat-square" alt="QQ Chat Group">
</a>

</div>

## ğŸ“– ä»‹ç»

è§†é¢‘é“¾æ¥è§£æï¼Œå¹¶æ ¹æ®å…¶å†…å®¹ç”Ÿæˆ**åŸºæœ¬ä¿¡æ¯**ã€**è¯äº‘**å’Œ**å†…å®¹æ€»ç»“**

<details>
<summary>æ‰‹æœºç«¯è§†å›¾</summary>

![](docs/mobile.png)
</details>

<details>
<summary>åŸºæœ¬ä¿¡æ¯</summary>

![](docs/basic.png)
</details>

<details>
<summary>è¯äº‘</summary>

![](docs/wordcloud.png)
</details>

<details>
<summary>è§†é¢‘æ€»ç»“</summary>

```markdown
## æ€»ç»“
é«˜é€šç¬¬äºŒä»£éªé¾™7+çš„å·¥ç¨‹æœºï¼Œæ‹¥æœ‰å°ç§¯ç”µ4nmå·¥è‰ºï¼ŒCPUè§„æ ¼å’Œéªé¾™8+ä¸€æ¨¡ä¸€æ ·ï¼ŒGPUè§„æ ¼ä¸Šæ˜¯æ–°çš„Adreno 700æ¶æ„ï¼Œæ€§èƒ½è¡¨ç°å‡ºä¼—ï¼Œèƒ½æ•ˆæ›²çº¿ç¨é€Šäº8+ï¼Œä½†ä¸­ä½é¢‘æ®µèƒ½æ•ˆæ°´å¹³ç›¸åŒï¼Œç»ˆç«¯æœºä»·æ ¼å¦‚æœèƒ½åšåˆ°1500-2000å…ƒï¼Œç«äº‰åŠ›è¿˜æ˜¯å¾ˆè¶³çš„ã€‚ 

## è¦ç‚¹
- ğŸ’» ç¬¬äºŒä»£éªé¾™7+æ‹¥æœ‰å°ç§¯ç”µ4nmå·¥è‰ºå’Œä¸éªé¾™8+ä¸€æ ·çš„CPUè§„æ ¼ã€‚
- ğŸ® æ–°çš„Adreno 700æ¶æ„GPUè§„æ ¼æ€§èƒ½å¼ºï¼Œæ¯”ä¸Šä¸€ä»£7Gen1å¼ºäº†è¶…è¿‡ä¸€å€ã€‚
- ğŸ“ˆ èƒ½æ•ˆæ›²çº¿ç¨é€Šäº8+ï¼Œä½†ä¸­ä½é¢‘æ®µèƒ½æ•ˆæ°´å¹³ç›¸åŒã€‚
- ğŸ’° å¦‚æœç»ˆç«¯æœºä»·æ ¼åšåˆ°1500-2000å…ƒï¼Œç«äº‰åŠ›è¿˜æ˜¯å¾ˆè¶³çš„ã€‚
- ğŸ§ª é«˜é€šè‡ªå·±ä¹Ÿæ„è¯†åˆ°éªé¾™7ç³»åˆ—çš„ç«äº‰åŠ›é—®é¢˜ï¼Œè¿™ä¹Ÿä½¿å…¶æˆäº†å¿…é¡»è¦è§£å†³çš„ä¸€ä¸ªé—®é¢˜ã€‚
- ğŸ•¹ï¸ 7+ Gen2å°±æ˜¯8+çš„CPUï¼Œæ——èˆ°è§„æ ¼ä¸‹æ”¾ï¼Œæœ€å¤§çš„å—ç›Šè€…æ˜¯å¤§å‹æ¸¸æˆã€‚
```

</details>

## ğŸ’¿ å®‰è£…

<details>
<summary>ä½¿ç”¨ nb-cli å®‰è£…</summary>
åœ¨ nonebot2 é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ‰“å¼€å‘½ä»¤è¡Œ, è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤å³å¯å®‰è£…

    nb plugin install nonebot-plugin-bilichat[all]

</details>

<details>
<summary>ä½¿ç”¨åŒ…ç®¡ç†å™¨å®‰è£…</summary>
åœ¨ nonebot2 é¡¹ç›®çš„æ’ä»¶ç›®å½•ä¸‹, æ‰“å¼€å‘½ä»¤è¡Œ, æ ¹æ®ä½ ä½¿ç”¨çš„åŒ…ç®¡ç†å™¨, è¾“å…¥ç›¸åº”çš„å®‰è£…å‘½ä»¤

<details>
<summary>pip</summary>

    pip install nonebot-plugin-bilichat[all]
</details>
<details>
<summary>pdm</summary>

    pdm add nonebot-plugin-bilichat[all]
</details>
<details>
<summary>poetry</summary>

    poetry add nonebot-plugin-bilichat[all]
</details>
<details>
<summary>conda</summary>

    conda install nonebot-plugin-bilichat[all]
</details>

æ‰“å¼€ nonebot2 é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `pyproject.toml` æ–‡ä»¶, åœ¨ `[tool.nonebot]` éƒ¨åˆ†è¿½åŠ å†™å…¥

    plugins = ["nonebot_plugin_bilichat"]

</details>

## âš™ï¸ é…ç½®

åœ¨ nonebot2 é¡¹ç›®çš„`.env`æ–‡ä»¶ä¸­æ·»åŠ ä¸‹è¡¨ä¸­çš„é…ç½®, é…ç½®å‡ä¸º**éå¿…é¡»é¡¹**

### é€šç”¨é…ç½®é¡¹

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|:-----:|:----:|:----:|:----:|
| bilichat_block              | bool      | False | æ˜¯å¦æ‹¦æˆªäº‹ä»¶(é˜²æ­¢å…¶ä»–æ’ä»¶äºŒæ¬¡è§£æ) |
| bilichat_enable_private     | bool      | True  | æ˜¯å¦å…è®¸å“åº”ç§èŠ |
| bilichat_enable_self        | bool      | False | æ˜¯å¦å…è®¸å“åº”è‡ªèº«çš„æ¶ˆæ¯ |
| bilichat_enable_v12_channel | bool      | True  | ~~æ˜¯å¦å…è®¸å“åº”é¢‘é“æ¶ˆæ¯(ob12ä¸“å±)~~(æš‚æœªå®ç°) |
| bilichat_enable_unkown_src  | bool      | False | æ˜¯å¦å…è®¸å“åº”æœªçŸ¥æ¥æºçš„æ¶ˆæ¯ |
| bilichat_whitelist          | list[str] | []    | **å“åº”**çš„ç¾¤èŠ(é¢‘é“)åå•, ä¼šè¦†ç›–é»‘åå• |
| bilichat_blacklist          | list[str] | []    | **ä¸å“åº”**çš„ç¾¤èŠ(é¢‘é“)åå• |
| bilichat_dynamic_font       | str       | None  | è§†é¢‘ä¿¡æ¯åŠè¯äº‘å›¾ç‰‡ä½¿ç”¨çš„å­—ä½“ |
| bilichat_cd_time            | int       | 120   | å¯¹åŒä¸€è§†é¢‘çš„å“åº”å†·å´æ—¶é—´(é˜²æ­¢åˆ·å±) |
| bilichat_neterror_retry     | int       | 3     | å¯¹éƒ¨åˆ†ç½‘ç»œè¯·æ±‚é”™è¯¯çš„å°è¯•æ¬¡æ•° |
| bilichat_use_bcut_asr       | bool      | True  | æ˜¯å¦åœ¨**æ²¡æœ‰å­—å¹•æ—¶**è°ƒç”¨å¿…å‰ªæ¥å£ç”Ÿæˆå­—å¹• |

æ³¨:

1. ç”±äº OneBot åè®®æœªè§„å®šæ˜¯å¦åº”ä¸ŠæŠ¥è‡ªèº«äº‹ä»¶ï¼Œå› æ­¤åœ¨ä¸åŒçš„åœºæ™¯ä¸‹èƒ½å¦è·å–è‡ªèº«äº‹ä»¶å¹¶ä¸ä¸€å®šï¼Œ`bilichat_enable_self` å®é™…èƒ½å¦ç”Ÿæ•ˆä¹Ÿä¸ä¹‹ç›¸å…³
2. å½“ `bilichat_whitelist` å­˜åœ¨æ—¶ï¼Œ`bilichat_blacklist` å°†ä¼šè¢«ç¦ç”¨
3. `bilichat_dynamic_font` å¯å¡«å†™è‡ªå®šä¹‰çš„å­—ä½“urlï¼Œä½†å¹¶ä¸æ¨èä¿®æ”¹
4. å½“ä½¿ç”¨ `bcut_asr` æ¥å£æ¥ç”ŸæˆAIå­—å¹•æ—¶ï¼Œæ ¹æ®è§†é¢‘æ—¶é•¿å’Œç½‘ç»œæƒ…å†µæœ‰å¯èƒ½ä¼šè¯†åˆ«å¤±è´¥ï¼ŒBotä¼šæç¤º `BCut-ASR conversion failed due to network error`ã€‚å¯ä»¥é€šè¿‡è°ƒé«˜ `bilichat_neterror_retry` æ¬¡æ•°æˆ–å‡ åˆ†é’Ÿåé‡è¯•æ¥å°è¯•é‡æ–°ç”Ÿæˆå­—å¹•

### åŸºç¡€ä¿¡æ¯é…ç½®é¡¹

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|:-----:|:----:|:----:|:----:|
| bilichat_basic_info          | bool | True | æ˜¯å¦å¼€å¯è§†é¢‘åŸºæœ¬ä¿¡æ¯ |
| bilichat_reply_to_basic_info | bool | True | åç»­æ¶ˆæ¯æ˜¯å¦å›å¤åŸºç¡€ä¿¡æ¯(å…³é—­åˆ™å›å¤å‘é€è€…çš„ä¿¡æ¯) |

### è¯äº‘é…ç½®é¡¹

å¼€å¯æ­¤åŠŸèƒ½éœ€è¦å®‰è£…å¯¹åº”çš„ä¾èµ– `nonebot-plugin-bilichat[wordcloud]`

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|:-----:|:----:|:----:|:----:|
| bilichat_word_cloud  | bool | True | æ˜¯å¦å¼€å¯è¯äº‘åŠŸèƒ½ |

æ³¨ï¼šè¯äº‘åŠŸèƒ½åœ¨ python3.11 ä¸­ç”±äº `wordcloud` åŒ…å®‰è£…å¤±è´¥æš‚æ—¶æ— æ³•å¯ç”¨ï¼Œè¯·ä¸è¦åœ¨ 3.11 ä¸­å¼€å¯æ­¤åŠŸèƒ½

### AIè§†é¢‘æ€»ç»“é…ç½®é¡¹

å¼€å¯æ­¤åŠŸèƒ½éœ€è¦å®‰è£…å¯¹åº”çš„ä¾èµ– `nonebot-plugin-bilichat[openai,newbing]`

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|:-----:|:----:|:----:|:----:|
| bilichat_newbing_cookie      | str       | None               | newbingçš„cookieæ–‡ä»¶è·¯å¾„(è·å–æ–¹å¼å‚è€ƒ[è¿™é‡Œ](https://github.com/acheong08/EdgeGPT#getting-authentication-required)å’Œ[è¿™é‡Œ](https://github.com/Harry-Jing/nonebot-plugin-bing-chat#%EF%B8%8F-%E9%85%8D%E7%BD%AE)) , è‹¥ç•™ç©ºåˆ™ç¦ç”¨newbingæ€»ç»“ |
| bilichat_newbing_token_limit | int       | 0                  | newbingè¯·æ±‚çš„æ–‡æœ¬é‡ä¸Šé™, 0ä¸ºæ— ä¸Šé™ |
| bilichat_newbing_preprocess  | bool      | True               | æ˜¯å¦å¯¹newbingçš„è¿”å›å€¼è¿›è¡Œé¢„å¤„ç†, ä»¥å»é™¤å…¶ä¸­ä¸æƒ³è¦çš„å†…å®¹ |
| bilichat_openai_token        | str       | None               | openaiçš„apikey, è‹¥ç•™ç©ºåˆ™ç¦ç”¨openaiæ€»ç»“ |
| bilichat_openai_proxy        | str       | None               | è®¿é—®openaiæˆ–newbingä½¿ç”¨çš„ä»£ç†åœ°å€ |
| bilichat_openai_model        | str       | gpt-3.5-turbo-0301 | ä½¿ç”¨çš„è¯­è¨€æ¨¡å‹åç§° |
| bilichat_openai_token_limit  | int       | 3500               | è¯·æ±‚çš„æ–‡æœ¬é‡ä¸Šé™, è®¡ç®—æ–¹å¼å¯å‚è€ƒ[tiktoken](https://github.com/openai/tiktoken) |

æ³¨:

1. openai ä¸ newbing ç›®å‰å‡éœ€æ±‚ç§‘å­¦ä¸Šç½‘æ‰èƒ½ä½¿ç”¨ï¼Œå›½å†…æœåŠ¡å™¨è¯·åŠ¡å¿…å¡«å†™ `bilichat_openai_proxy` æˆ–å…¨å±€é€æ˜ä»£ç†
2. å¦‚æœåŒæ—¶å¡«å†™äº† `bilichat_openai_token` å’Œ `bilichat_newbing_cookie`ï¼Œåˆ™ä¼šä½¿ç”¨ `newbing` è¿›è¡Œæ€»ç»“, å¹¶åœ¨ `newbing` æ€»ç»“å¤±è´¥æ—¶ä½¿ç”¨ `openai` è¿›è¡Œæ€»ç»“
3. `newbing` å’Œ `openai` å‡æœ‰ç¼“å­˜æœºåˆ¶ï¼ŒåŒä¸€è§†é¢‘åœ¨**è·å–åˆ°æ­£å¸¸çš„æ€»ç»“å†…å®¹å**ä¸ä¼šé‡å¤å‘é€è¯·æ±‚ï¼Œå¦‚éœ€åˆ·æ–°è¯·æ±‚å†…å®¹å¯ä»¥æ‰‹åŠ¨åˆ é™¤å¯¹åº”è§†é¢‘çš„ç¼“å­˜æ–‡ä»¶æˆ–æ•´ä¸ªç¼“å­˜æ–‡ä»¶å¤¹
4. ç»æµ‹è¯•ï¼Œç›®å‰ `newbing` è‡³å°‘èƒ½æ€»ç»“ 12000 å­—ç¬¦ä»¥ä¸Šçš„æ–‡æœ¬ï¼Œæ¨æµ‹ token ä¸Šé™åº”ä¸º `gpt-4-32k-0314` çš„ `32200` tokenï¼Œä½†è¿‡é•¿çš„å†…å®¹æ˜“é€ æˆè¾“å‡ºå†…å®¹åŒ…å«é¢å¤–å†…å®¹æˆ–æ€»ç»“å¤±è´¥ï¼Œå› æ­¤ä¹Ÿå»ºè®®è®¾ç½®ä¸€ä¸ªåˆç†çš„ token ä¸Šé™ ~~ï¼ˆåæ­£ä¸è¦é’±ï¼Œè¦å•¥è‡ªè¡Œè½¦ï¼‰~~
5. ç”±äº `newbing` é™åˆ¶è¾ƒå¤§ï¼Œä¹Ÿä¸å¦‚ `openai` å¬è¯ï¼Œä¸”éœ€è¦è”ç½‘æŸ¥è¯¢èµ„æ–™ï¼Œå› æ­¤ä½¿ç”¨ä½“éªŒå¹¶ä¸å¦‚ chatgpt ~~ï¼ˆåæ­£ä¸è¦é’±ï¼Œè¦å•¥è‡ªè¡Œè½¦ï¼‰~~

## ğŸ‰ ä½¿ç”¨

ç›´æ¥å‘é€è§†é¢‘(ä¸“æ )é“¾æ¥å³å¯

### æŒ‡ä»¤è¡¨

> æ­£åœ¨å¼€å‘æŒ‡ä»¤ç›¸å…³ï¼Œè¯·æ— è§†è¿™é‡Œçš„æ¨¡æ¿
> æŒ‡ä»¤è®¾è®¡æ–¹æ¡ˆå¾é›†ä¸­ï¼Œå¦‚æœæœ‰ä»€ä¹ˆæƒ³è¦å®ç°çš„åŠŸèƒ½å¯ä»¥åœ¨issueä¸­æå‡º

| æŒ‡ä»¤ | æƒé™ | éœ€è¦@ | èŒƒå›´ | è¯´æ˜ |
|:-----:|:----:|:----:|:----:|:----:|
| æŒ‡ä»¤1 | ä¸»äºº | å¦ | ç§èŠ | æŒ‡ä»¤è¯´æ˜ |
| æŒ‡ä»¤2 | ç¾¤å‘˜ | æ˜¯ | ç¾¤èŠ | æŒ‡ä»¤è¯´æ˜ |

## ğŸ™ æ„Ÿè°¢

åœ¨æ­¤æ„Ÿè°¢ä»¥ä¸‹å¼€å‘è€…(é¡¹ç›®)å¯¹æœ¬é¡¹ç›®åšå‡ºçš„è´¡çŒ®ï¼š

- [BibiGPT](https://github.com/JimmyLv/BibiGPT) é¡¹ç›®çµæ„Ÿæ¥æº
- [bilibili-API-collect](https://github.com/SocialSisterYi/bilibili-API-collect) æ˜“å§æ”¶é›†çš„å„ç§ BiliBili Api åŠå…¶æä¾›çš„ gRPC Api è°ƒç”¨æ–¹æ¡ˆ
- [BBot-Graia](https://github.com/djkcyl/BBot-Graia) åŠŸèƒ½æ¥æº ~~(æˆ‘ ç‰› æˆ‘ è‡ª å·±)~~
- [ABot-Graia](https://github.com/djkcyl/ABot-Graia) æ°¸è¿œæ€€å¿µæœ€å¥½çš„ ABot ğŸ™
- [nonebot-plugin-template](https://github.com/A-kirami/nonebot-plugin-template): é¡¹ç›®çš„ README æ¨¡æ¿

## â³ Star è¶‹åŠ¿

[![Stargazers over time](https://starchart.cc/djkcyl/nonebot-plugin-bilichat.svg)](https://starchart.cc/djkcyl/nonebot-plugin-bilichat)
