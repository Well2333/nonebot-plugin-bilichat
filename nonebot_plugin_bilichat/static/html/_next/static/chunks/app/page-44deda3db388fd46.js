(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{389:(e,i,n)=>{"use strict";n.r(i),n.d(i,{default:()=>er});var a=n(5155),t=n(2115),s=n(2596),o=n(9688);function r(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return(0,o.QP)((0,s.$)(i))}function c(e){let{className:i,...n}=e;return(0,a.jsx)("div",{"data-slot":"card",className:r("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",i),...n})}function l(e){let{className:i,...n}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:r("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",i),...n})}function d(e){let{className:i,...n}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:r("leading-none font-semibold",i),...n})}function u(e){let{className:i,...n}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:r("text-muted-foreground text-sm",i),...n})}function g(e){let{className:i,...n}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:r("px-6",i),...n})}var b=n(9708),f=n(2085);let h=(0,f.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function p(e){let{className:i,variant:n,size:t,asChild:s=!1,...o}=e,c=s?b.DX:"button";return(0,a.jsx)(c,{"data-slot":"button",className:r(h({variant:n,size:t,className:i})),...o})}function m(e){let{className:i,type:n,...t}=e;return(0,a.jsx)("input",{type:n,"data-slot":"input",className:r("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",i),...t})}var x=n(968);function _(e){let{className:i,...n}=e;return(0,a.jsx)(x.b,{"data-slot":"label",className:r("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",i),...n})}var v=n(2098),y=n(3509),j=n(5525),w=n(9621),k=n(7863),N=n(6474),C=n(7835),z=n(4835),q=n(8611);function A(e){let{className:i,...n}=e;return(0,a.jsx)(q.bL,{"data-slot":"switch",className:r("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",i),...n,children:(0,a.jsx)(q.zi,{"data-slot":"switch-thumb",className:r("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var I=n(8143);function P(e){let{className:i,...n}=e;return(0,a.jsx)(I.bL,{"data-slot":"tabs",className:r("flex flex-col gap-2",i),...n})}function S(e){let{className:i,...n}=e;return(0,a.jsx)(I.B8,{"data-slot":"tabs-list",className:r("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",i),...n})}function T(e){let{className:i,...n}=e;return(0,a.jsx)(I.l9,{"data-slot":"tabs-trigger",className:r("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",i),...n})}function W(e){let{className:i,...n}=e;return(0,a.jsx)(I.UC,{"data-slot":"tabs-content",className:r("flex-1 outline-none",i),...n})}let E=(0,f.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function U(e){let{className:i,variant:n,asChild:t=!1,...s}=e,o=t?b.DX:"span";return(0,a.jsx)(o,{"data-slot":"badge",className:r(E({variant:n}),i),...s})}function O(e){let{className:i,...n}=e;return(0,a.jsx)("textarea",{"data-slot":"textarea",className:r("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",i),...n})}var K=n(1154),L=n(5339),B=n(4229),F=n(381),R=n(4869),D=n(5657),J=n(4213),V=n(3861),M=n(4616),X=n(2525),G=n(3136);function H(e){let{fieldKey:i,label:n,description:t,children:s,disabled:o}=e,{t:r}=(0,G.s)();return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(_,{htmlFor:i,className:o?"text-gray-500":"",children:[n," ",(0,a.jsxs)("span",{className:"text-xs text-gray-400 dark:text-gray-500 font-mono ml-2",children:["(",i,")"]})]}),t&&(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:t})]}),s,o&&(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:r("ui.readonly_field")})]})}let Q=n(1890).env.NEXT_PUBLIC_API_BASE_URL||"",$=()=>{let e=window.location.pathname.split("/").filter(Boolean);return e.length>0?"/".concat(e[0]):"/bilichatwebui"},Y=()=>localStorage.getItem("access_token"),Z=e=>{localStorage.setItem("access_token",e)},ee=()=>{localStorage.removeItem("access_token")},ei=async function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Y(),a=new Headers(i.headers);a.set("Content-Type","application/json"),n&&a.set("Authorization","Bearer ".concat(n));let t=$(),s=await fetch("".concat(Q).concat(t).concat(e),{...i,headers:a});return 401===s.status&&(ee(),window.location.reload()),s},en=async e=>{let i=await ei("/auth/login",{method:"POST",body:JSON.stringify({code:e})});if(!i.ok)throw Error("Login failed: ".concat(i.statusText));return i.json()},ea=async()=>{let e=await ei("/auth/me");if(!e.ok)throw Error("Failed to get user info: ".concat(e.statusText));return e.json()},et=async()=>{let e=await ei("/config");if(!e.ok)throw Error("Failed to get config: ".concat(e.statusText));return e.json()},es=async e=>{let i=await ei("/config",{method:"POST",body:JSON.stringify(e)});if(!i.ok)throw Error("Failed to save config: ".concat(i.statusText));return i.json()};function eo(e){let{showSourceCode:i}=e,{t:n}=(0,G.s)(),{config:s,isLoading:o,error:r,hasChanges:b,updateConfig:f,saveConfig:h}=function(){let[e,i]=(0,t.useState)(null),[n,a]=(0,t.useState)(!0),[s,o]=(0,t.useState)(null),[r,c]=(0,t.useState)(!1);(0,t.useEffect)(()=>{l()},[]);let l=async()=>{try{a(!0),o(null);let e=await et();i(e),c(!1)}catch(e){o(e instanceof Error?e.message:"Failed to load configuration")}finally{a(!1)}},d=async()=>{if(!e)return!1;try{o(null);let n=await es(e);return i(n),c(!1),!0}catch(e){return o(e instanceof Error?e.message:"Failed to save configuration"),!1}};return{config:e,isLoading:n,error:s,hasChanges:r,updateConfig:(n,a)=>{if(!e)return;let t={...e},s=t;for(let e=0;e<n.length-1;e++)s=s[n[e]];s[n[n.length-1]]=a,i(t),c(!0)},saveConfig:d,reloadConfig:l}}(),x=e=>{s&&f(["api","request_api"],s.api.request_api.filter((i,n)=>n!==e))},v=(e,i,n)=>{if(!s)return;let a=[...s.api.request_api];a[e]={...a[e],[i]:n},f(["api","request_api"],a)},y=async()=>{await h()&&alert(n("ui.save_success"))};return o?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(K.A,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-blue-600"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:n("ui.loading_config")})]})}):r?(0,a.jsx)(c,{className:"border-red-200 dark:border-red-800",children:(0,a.jsx)(g,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400",children:[(0,a.jsx)(L.A,{className:"h-5 w-5"}),(0,a.jsx)("p",{children:r})]})})}):s?(0,a.jsxs)("div",{className:"space-y-6",children:[b&&(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)(p,{onClick:y,className:"flex items-center gap-2",children:[(0,a.jsx)(B.A,{className:"h-4 w-4"}),n("ui.save_changes")]})}),i&&(0,a.jsxs)(c,{className:"mb-8",children:[(0,a.jsxs)(l,{children:[(0,a.jsxs)(d,{className:"flex items-center gap-2",children:[(0,a.jsx)(w.A,{className:"h-5 w-5"}),n("ui.source_title")]}),(0,a.jsx)(u,{children:n("ui.source_description")})]}),(0,a.jsx)(g,{children:(0,a.jsx)("pre",{className:"bg-gray-100 dark:bg-gray-800 p-4 rounded-lg overflow-x-auto text-sm",children:(0,a.jsx)("code",{children:JSON.stringify(s,null,2)})})})]}),(0,a.jsxs)(P,{defaultValue:"general",className:"w-full",children:[(0,a.jsxs)(S,{className:"grid w-full grid-cols-5",children:[(0,a.jsxs)(T,{value:"general",className:"flex items-center gap-2",children:[(0,a.jsx)(F.A,{className:"h-4 w-4"}),n("tab.general")]}),(0,a.jsxs)(T,{value:"webui",className:"flex items-center gap-2",children:[(0,a.jsx)(R.A,{className:"h-4 w-4"}),n("tab.webui")]}),(0,a.jsxs)(T,{value:"nonebot",className:"flex items-center gap-2",children:[(0,a.jsx)(D.A,{className:"h-4 w-4"}),n("tab.nonebot")]}),(0,a.jsxs)(T,{value:"api",className:"flex items-center gap-2",children:[(0,a.jsx)(J.A,{className:"h-4 w-4"}),n("tab.api")]}),(0,a.jsxs)(T,{value:"subs",className:"flex items-center gap-2",children:[(0,a.jsx)(V.A,{className:"h-4 w-4"}),n("tab.subs")]})]}),(0,a.jsx)(W,{value:"general",className:"space-y-6",children:(0,a.jsxs)(c,{children:[(0,a.jsxs)(l,{children:[(0,a.jsx)(d,{children:n("config.analyze.title")}),(0,a.jsx)(u,{children:n("config.analyze.desc")})]}),(0,a.jsxs)(g,{className:"space-y-4",children:[(0,a.jsx)(H,{fieldKey:"analyze.video",label:n("config.analyze.video"),description:n("config.analyze.video.desc"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{}),(0,a.jsx)(A,{id:"analyze-video",checked:s.analyze.video,onCheckedChange:e=>f(["analyze","video"],e)})]})}),(0,a.jsx)(H,{fieldKey:"analyze.dynamic",label:n("config.analyze.dynamic"),description:n("config.analyze.dynamic.desc"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{}),(0,a.jsx)(A,{id:"analyze-dynamic",checked:s.analyze.dynamic,onCheckedChange:e=>f(["analyze","dynamic"],e)})]})}),(0,a.jsx)(H,{fieldKey:"analyze.column",label:n("config.analyze.column"),description:n("config.analyze.column.desc"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{}),(0,a.jsx)(A,{id:"analyze-column",checked:s.analyze.column,onCheckedChange:e=>f(["analyze","column"],e)})]})}),(0,a.jsx)(H,{fieldKey:"analyze.cd_time",label:n("config.analyze.cd_time"),description:n("config.analyze.cd_time.desc"),children:(0,a.jsx)(m,{id:"cd-time",type:"number",value:s.analyze.cd_time,onChange:e=>f(["analyze","cd_time"],Number.parseInt(e.target.value)),min:"0"})})]})]})}),(0,a.jsx)(W,{value:"webui",className:"space-y-6",children:(0,a.jsxs)(c,{children:[(0,a.jsxs)(l,{children:[(0,a.jsx)(d,{children:n("config.webui.title")}),(0,a.jsx)(u,{children:n("config.webui.desc")})]}),(0,a.jsxs)(g,{className:"space-y-4",children:[(0,a.jsx)(H,{fieldKey:"webui.enable",label:n("config.webui.enable"),description:n("config.webui.enable.desc"),disabled:!0,children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{}),(0,a.jsx)(A,{id:"webui-enable",checked:s.webui.enable,onCheckedChange:e=>f(["webui","enable"],e),disabled:!0})]})}),(0,a.jsx)(H,{fieldKey:"webui.api_path",label:n("config.webui.api_path"),description:n("config.webui.api_path.desc"),disabled:!0,children:(0,a.jsx)(m,{id:"webui-path",value:s.webui.api_path,onChange:e=>f(["webui","api_path"],e.target.value),disabled:!0,className:"bg-gray-50 dark:bg-gray-800"})}),(0,a.jsx)(H,{fieldKey:"webui.jwt_secret_key",label:n("config.webui.jwt_secret_key"),description:n("config.webui.jwt_secret_key.desc"),disabled:!0,children:(0,a.jsx)(m,{id:"webui-jwt-key",type:"password",value:s.webui.jwt_secret_key,onChange:e=>f(["webui","jwt_secret_key"],e.target.value),disabled:!0,className:"bg-gray-50 dark:bg-gray-800"})})]})]})}),(0,a.jsx)(W,{value:"nonebot",className:"space-y-6",children:(0,a.jsxs)(c,{children:[(0,a.jsxs)(l,{children:[(0,a.jsx)(d,{children:n("config.nonebot.title")}),(0,a.jsx)(u,{children:n("config.nonebot.desc")})]}),(0,a.jsxs)(g,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(H,{fieldKey:"nonebot.block",label:n("config.nonebot.block"),description:n("config.nonebot.block.desc"),disabled:!0,children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{}),(0,a.jsx)(A,{id:"block",checked:s.nonebot.block,onCheckedChange:e=>f(["nonebot","block"],e),disabled:!0})]})}),(0,a.jsx)(H,{fieldKey:"nonebot.fallback",label:n("config.nonebot.fallback"),description:n("config.nonebot.fallback.desc"),disabled:!0,children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{}),(0,a.jsx)(A,{id:"fallback",checked:s.nonebot.fallback,onCheckedChange:e=>f(["nonebot","fallback"],e),disabled:!0})]})}),(0,a.jsx)(H,{fieldKey:"nonebot.only_to_me",label:n("config.nonebot.only_to_me"),description:n("config.nonebot.only_to_me.desc"),disabled:!0,children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{}),(0,a.jsx)(A,{id:"only-to-me",checked:s.nonebot.only_to_me,onCheckedChange:e=>f(["nonebot","only_to_me"],e),disabled:!0})]})}),(0,a.jsx)(H,{fieldKey:"nonebot.command_to_me",label:n("config.nonebot.command_to_me"),description:n("config.nonebot.command_to_me.desc"),disabled:!0,children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{}),(0,a.jsx)(A,{id:"command-to-me",checked:s.nonebot.command_to_me,onCheckedChange:e=>f(["nonebot","command_to_me"],e),disabled:!0})]})})]}),(0,a.jsx)(H,{fieldKey:"nonebot.cmd_start",label:n("config.nonebot.cmd_start"),description:n("config.nonebot.cmd_start.desc"),disabled:!0,children:(0,a.jsx)(m,{id:"cmd-start",value:s.nonebot.cmd_start,onChange:e=>f(["nonebot","cmd_start"],e.target.value),disabled:!0,className:"bg-gray-50 dark:bg-gray-800"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(_,{children:n("config.nonebot.cmd_aliases")}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(_,{className:"text-sm",children:n("config.nonebot.cmd_add_sub_label")}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:s.nonebot.cmd_add_sub.map((e,i)=>(0,a.jsx)(U,{variant:"secondary",children:e},i))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(_,{className:"text-sm",children:n("config.nonebot.cmd_remove_sub_label")}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:s.nonebot.cmd_remove_sub.map((e,i)=>(0,a.jsx)(U,{variant:"secondary",children:e},i))})]})]})]})]})]})}),(0,a.jsxs)(W,{value:"api",className:"space-y-6",children:[(0,a.jsxs)(c,{children:[(0,a.jsxs)(l,{children:[(0,a.jsx)(d,{children:n("config.api.title")}),(0,a.jsx)(u,{children:n("config.api.desc")})]}),(0,a.jsxs)(g,{className:"space-y-4",children:[(0,a.jsx)(H,{fieldKey:"api.browser_shot_quality",label:n("config.api.browser_shot_quality"),description:n("config.api.browser_shot_quality.desc"),children:(0,a.jsx)(m,{id:"browser-quality",type:"number",min:"10",max:"100",value:s.api.browser_shot_quality,onChange:e=>f(["api","browser_shot_quality"],Number.parseInt(e.target.value))})}),(0,a.jsx)(H,{fieldKey:"api.api_health_check_interval",label:n("config.api.api_health_check_interval"),description:n("config.api.api_health_check_interval.desc"),children:(0,a.jsx)(m,{id:"health-check",type:"number",min:"15",value:s.api.api_health_check_interval,onChange:e=>f(["api","api_health_check_interval"],Number.parseInt(e.target.value))})})]})]}),(0,a.jsxs)(c,{children:[(0,a.jsx)(l,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d,{children:n("config.api.request_api.title")}),(0,a.jsx)(u,{children:n("config.api.request_api.desc")})]}),(0,a.jsxs)(p,{onClick:()=>{s&&f(["api","request_api"],[...s.api.request_api,{api:"",token:"",weight:1,enable:!0,note:""}])},size:"sm",className:"flex items-center gap-2",children:[(0,a.jsx)(M.A,{className:"h-4 w-4"}),n("ui.add_endpoint")]})]})}),(0,a.jsx)(g,{children:0===s.api.request_api.length?(0,a.jsx)("p",{className:"text-gray-500 text-center py-4",children:n("ui.no_endpoints")}):(0,a.jsx)("div",{className:"space-y-4",children:s.api.request_api.map((e,i)=>(0,a.jsxs)("div",{className:"border rounded-lg p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(_,{className:"font-medium",children:[n("ui.endpoint_number"),i+1]}),(0,a.jsx)(p,{variant:"ghost",size:"sm",onClick:()=>x(i),className:"text-red-600 hover:text-red-700",children:(0,a.jsx)(X.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,a.jsx)(H,{fieldKey:"api.request_api[".concat(i,"].api"),label:n("config.api.request_api.api"),description:n("config.api.request_api.api.desc"),children:(0,a.jsx)(m,{id:"api-".concat(i),value:e.api,onChange:e=>v(i,"api",e.target.value),placeholder:"https://api.example.com"})}),(0,a.jsx)(H,{fieldKey:"api.request_api[".concat(i,"].token"),label:n("config.api.request_api.token"),description:n("config.api.request_api.token.desc"),children:(0,a.jsx)(m,{id:"token-".concat(i),type:"password",value:e.token,onChange:e=>v(i,"token",e.target.value),placeholder:n("ui.leave_empty_if_not_required")})}),(0,a.jsx)(H,{fieldKey:"api.request_api[".concat(i,"].weight"),label:n("config.api.request_api.weight"),description:n("config.api.request_api.weight.desc"),children:(0,a.jsx)(m,{id:"weight-".concat(i),type:"number",min:"1",value:e.weight,onChange:e=>v(i,"weight",Number.parseInt(e.target.value))})}),(0,a.jsx)(H,{fieldKey:"api.request_api[".concat(i,"].enable"),label:n("config.api.request_api.enable"),description:n("config.api.request_api.enable.desc"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{}),(0,a.jsx)(A,{id:"enable-".concat(i),checked:e.enable,onCheckedChange:e=>v(i,"enable",e)})]})})]}),(0,a.jsx)(H,{fieldKey:"api.request_api[".concat(i,"].note"),label:n("config.api.request_api.note"),description:n("config.api.request_api.note.desc"),children:(0,a.jsx)(O,{id:"note-".concat(i),value:e.note,onChange:e=>v(i,"note",e.target.value),placeholder:n("ui.optional_description_or_note"),rows:2})})]},i))})})]})]}),(0,a.jsx)(W,{value:"subs",className:"space-y-6",children:(0,a.jsxs)(c,{children:[(0,a.jsxs)(l,{children:[(0,a.jsx)(d,{children:n("config.subs.title")}),(0,a.jsx)(u,{children:n("config.subs.desc")})]}),(0,a.jsxs)(g,{className:"space-y-4",children:[(0,a.jsx)(H,{fieldKey:"subs.dynamic_interval",label:n("config.subs.dynamic_interval"),description:n("config.subs.dynamic_interval.desc"),children:(0,a.jsx)(m,{id:"dynamic-interval",type:"number",min:"15",value:s.subs.dynamic_interval,onChange:e=>f(["subs","dynamic_interval"],Number.parseInt(e.target.value))})}),(0,a.jsx)(H,{fieldKey:"subs.live_interval",label:n("config.subs.live_interval"),description:n("config.subs.live_interval.desc"),children:(0,a.jsx)(m,{id:"live-interval",type:"number",min:"10",value:s.subs.live_interval,onChange:e=>f(["subs","live_interval"],Number.parseInt(e.target.value))})}),(0,a.jsx)(H,{fieldKey:"subs.push_delay",label:n("config.subs.push_delay"),description:n("config.subs.push_delay.desc"),children:(0,a.jsx)(m,{id:"push-delay",type:"number",min:"0",value:s.subs.push_delay,onChange:e=>f(["subs","push_delay"],Number.parseInt(e.target.value))})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(_,{children:n("config.subs.users")}),(0,a.jsx)("div",{className:"mt-2",children:0===Object.keys(s.subs.users).length?(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:n("ui.no_users")}):(0,a.jsx)("div",{className:"space-y-2",children:Object.keys(s.subs.users).map((e,i)=>(0,a.jsxs)(U,{variant:"secondary",children:["User ",e]},i))})})]})]})]})})]})]}):(0,a.jsx)(c,{children:(0,a.jsx)(g,{className:"pt-6",children:(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-center",children:n("ui.no_config")})})})}function er(){return(0,a.jsx)(G.I18nProvider,{children:(0,a.jsx)(ec,{})})}function ec(){let{t:e,language:i,setLanguage:n}=(0,G.s)(),{isAuthenticated:s,isLoading:o,logout:r,setIsAuthenticated:b}=function(){let[e,i]=(0,t.useState)(!1),[n,a]=(0,t.useState)(!0),[s,o]=(0,t.useState)(null);return(0,t.useEffect)(()=>{(async()=>{if(!Y()){i(!1),a(!1);return}try{let e=await ea();o(e),i(!0)}catch(e){console.error("Auth check failed:",e),ee(),i(!1)}finally{a(!1)}})()},[]),{isAuthenticated:e,isLoading:n,user:s,logout:()=>{ee(),i(!1),o(null)},setIsAuthenticated:i}}(),[f,h]=(0,t.useState)(!1),[x,q]=(0,t.useState)(""),[A,I]=(0,t.useState)(!1),[P,S]=(0,t.useState)(""),[T,W]=(0,t.useState)(!1);(0,t.useEffect)(()=>{f?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[f]);let E=async i=>{if(i.preventDefault(),x.trim()){W(!0),S("");try{let i=await en(x);i.success&&i.access_token?(Z(i.access_token),b(!0)):S(i.message||e("ui.auth.invalid_otp"))}catch(i){S(i instanceof Error?i.message:e("ui.auth.login_failed"))}finally{W(!1)}}};return o?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center transition-colors duration-300 ".concat(f?"dark bg-gray-900":"bg-gray-50"),children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:e("ui.loading")})]})}):s?(0,a.jsx)("div",{className:"min-h-screen transition-colors duration-300 ".concat(f?"dark bg-gray-900":"bg-gray-50"),children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("ui.title")}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:e("ui.subtitle")})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(p,{variant:"outline",onClick:()=>I(!A),className:"flex items-center gap-2 dark:text-white dark:border-gray-600",children:[(0,a.jsx)(w.A,{className:"h-4 w-4"}),e("ui.source"),A?(0,a.jsx)(k.A,{className:"h-4 w-4"}):(0,a.jsx)(N.A,{className:"h-4 w-4"})]}),(0,a.jsx)(p,{variant:"outline",size:"icon",onClick:()=>n("zh"===i?"en":"zh"),className:"rounded-full border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700",title:e("ui.language"),children:(0,a.jsx)(C.A,{className:"h-5 w-5 text-gray-700 dark:text-gray-300"})}),(0,a.jsx)(p,{variant:"outline",size:"icon",onClick:()=>h(!f),className:"rounded-full border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700",children:f?(0,a.jsx)(v.A,{className:"h-5 w-5 text-gray-700 dark:text-gray-300"}):(0,a.jsx)(y.A,{className:"h-5 w-5 text-gray-700 dark:text-gray-300"})}),(0,a.jsx)(p,{variant:"outline",size:"icon",onClick:r,className:"rounded-full border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 bg-transparent",title:e("ui.logout"),children:(0,a.jsx)(z.A,{className:"h-5 w-5 text-gray-700 dark:text-gray-300"})})]})]}),(0,a.jsx)(eo,{showSourceCode:A})]})}):(0,a.jsx)("div",{className:"min-h-screen transition-colors duration-300 ".concat(f?"dark bg-gray-900":"bg-gray-50"),children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)("div",{className:"flex justify-end mb-8",children:(0,a.jsx)(p,{variant:"outline",size:"icon",onClick:()=>h(!f),className:"rounded-full border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700",children:f?(0,a.jsx)(v.A,{className:"h-5 w-5 text-gray-700 dark:text-gray-300"}):(0,a.jsx)(y.A,{className:"h-5 w-5 text-gray-700 dark:text-gray-300"})})}),(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,a.jsxs)(c,{className:"w-full max-w-md",children:[(0,a.jsxs)(l,{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-blue-100 dark:bg-blue-900",children:(0,a.jsx)(j.A,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),(0,a.jsx)(d,{children:e("ui.auth.title")}),(0,a.jsx)(u,{children:e("ui.auth.description")})]}),(0,a.jsx)(g,{children:(0,a.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(_,{htmlFor:"otp",children:e("ui.auth.enter_otp")}),(0,a.jsx)(m,{id:"otp",type:"text",value:x,onChange:e=>q(e.target.value),placeholder:e("ui.auth.otp_placeholder"),className:"text-center text-lg font-mono",disabled:T})]}),P&&(0,a.jsx)("div",{className:"text-sm text-red-600 dark:text-red-400 text-center",children:P}),(0,a.jsx)(p,{type:"submit",className:"w-full",disabled:T,children:T?e("ui.auth.logging_in"):e("ui.auth.authenticate")})]})})]})})]})})}},3136:(e,i,n)=>{"use strict";n.d(i,{I18nProvider:()=>r,s:()=>c});var a=n(5155),t=n(2115);let s=(0,t.createContext)(void 0),o={zh:{"ui.title":"BiliChat 配置管理","ui.subtitle":"管理您的项目配置设置","ui.auth.title":"身份验证","ui.auth.description":"输入 OTP 以访问配置面板","ui.auth.generated_otp":"生成的 OTP：","ui.auth.enter_otp":"输入 OTP","ui.auth.otp_placeholder":"输入 6 位数字 OTP","ui.auth.authenticate":"验证","ui.auth.invalid_otp":"无效的 OTP，请重试。","ui.source":"源码","ui.source_title":"配置源码","ui.source_description":"当前配置文件内容","ui.save_changes":"保存更改","ui.save_success":"配置保存成功！","ui.add_endpoint":"添加端点","ui.endpoint_number":"端点 #","ui.no_endpoints":"未配置 API 端点","ui.no_users":"暂无用户订阅","ui.readonly_field":"此字段为只读","ui.language":"语言","ui.leave_empty_to_disable_auth":"留空以禁用身份验证","ui.leave_empty_if_not_required":"如不需要请留空","ui.optional_description_or_note":"可选描述或备注","ui.loading":"加载中...","ui.loading_config":"加载配置中...","ui.no_config":"无法加载配置","ui.logout":"登出","ui.auth.logging_in":"登录中...","ui.auth.login_failed":"登录失败","tab.general":"通用","tab.webui":"WebUI","tab.nonebot":"NoneBot","tab.api":"API","tab.subs":"订阅","config.version":"插件版本","config.version.desc":"插件版本","config.webui.title":"WebUI 配置","config.webui.desc":"配置 Web 界面设置","config.webui.enable":"启用 WebUI","config.webui.enable.desc":"是否启用 WebUI","config.webui.api_path":"WebUI 挂载路径","config.webui.api_path.desc":"WebUI 挂载路径","config.webui.api_access_token":"WebUI Token","config.webui.api_access_token.desc":"WebUI Token","config.webui.jwt_secret_key":"JWT密钥","config.webui.jwt_secret_key.desc":"用于JWT签名的密钥, 生产环境请务必修改","config.nonebot.title":"nonebot 配置","config.nonebot.desc":"配置机器人行为和命令","config.nonebot.block":"拦截事件","config.nonebot.block.desc":"是否拦截事件(防止其他插件二次解析)","config.nonebot.fallback":"启用发送失败回退","config.nonebot.fallback.desc":"是否启用 Alconna 的发送失败回退机制","config.nonebot.enable_self":"响应自身的消息","config.nonebot.enable_self.desc":"是否允许响应自身的消息","config.nonebot.only_self":"仅响应自身的消息","config.nonebot.only_self.desc":"是否仅响应自身的消息, 开启后会覆盖全部其他规则(人机合一特供)","config.nonebot.only_to_me":"仅@机器人","config.nonebot.only_to_me.desc":"非自身消息是否需要 @机器人 或使用机器人的昵称才响应","config.nonebot.command_to_me":"命令需要@机器人","config.nonebot.command_to_me.desc":"命令是否需要@机器人或使用机器人的昵称才响应","config.nonebot.cmd_start":"命令的起始词","config.nonebot.cmd_start.desc":"命令的起始词, 可设置为空","config.nonebot.cmd_aliases":"命令别名","config.nonebot.cmd_add_sub":"订阅命令","config.nonebot.cmd_remove_sub":"退订命令","config.nonebot.cmd_add_sub_label":"订阅命令","config.nonebot.cmd_remove_sub_label":"退订命令","config.api.title":"API 配置","config.api.desc":"配置 API 端点和设置","config.api.browser_shot_quality":"浏览器截图质量","config.api.browser_shot_quality.desc":"浏览器截图质量, 范围为 10-100","config.api.api_health_check_interval":"API 健康检查间隔","config.api.api_health_check_interval.desc":"API 健康检查间隔, 单位为秒","config.api.request_api.title":"API 请求列表","config.api.request_api.desc":"配置 bilichat-request API 端点","config.api.request_api.api":"API 地址","config.api.request_api.token":"API Token","config.api.request_api.weight":"权重","config.api.request_api.enable":"是否启用","config.api.request_api.note":"备注","config.api.request_api.api.desc":"API 地址","config.api.request_api.token.desc":"API Token, 服务端未设置则留空","config.api.request_api.weight.desc":"权重, 用于负载均衡, 越大越优先","config.api.request_api.enable.desc":"是否启用","config.api.request_api.note.desc":"备注","config.analyze.title":"内容解析配置","config.analyze.desc":"配置要解析的内容类型","config.analyze.video":"解析视频","config.analyze.video.desc":"是否解析视频","config.analyze.dynamic":"解析动态","config.analyze.dynamic.desc":"是否解析动态","config.analyze.column":"解析专栏","config.analyze.column.desc":"是否解析专栏","config.analyze.cd_time":"响应冷却时间","config.analyze.cd_time.desc":"对同一视频的响应冷却时间(防止刷屏)","config.subs.title":"订阅配置","config.subs.desc":"配置轮询间隔和推送设置","config.subs.dynamic_interval":"动态轮询间隔","config.subs.dynamic_interval.desc":"动态轮询间隔, 单位为秒","config.subs.live_interval":"直播轮询间隔","config.subs.live_interval.desc":"直播轮询间隔, 单位为秒","config.subs.push_delay":"推送延迟","config.subs.push_delay.desc":"每条推送的延迟, 单位为秒","config.subs.users":"已添加订阅的用户"},en:{"ui.title":"BiliChat Configuration","ui.subtitle":"Manage your project configuration settings","ui.auth.title":"Authentication Required","ui.auth.description":"Enter the OTP to access the configuration panel","ui.auth.generated_otp":"Generated OTP:","ui.auth.enter_otp":"Enter OTP","ui.auth.otp_placeholder":"Enter 6-digit OTP","ui.auth.authenticate":"Authenticate","ui.auth.invalid_otp":"Invalid OTP. Please try again.","ui.source":"Source","ui.source_title":"Configuration Source","ui.source_description":"Current configuration file content","ui.save_changes":"Save Changes","ui.save_success":"Configuration saved successfully!","ui.add_endpoint":"Add Endpoint","ui.endpoint_number":"Endpoint #","ui.no_endpoints":"No API endpoints configured","ui.no_users":"No users subscribed yet","ui.readonly_field":"This field is read-only","ui.language":"Language","ui.leave_empty_to_disable_auth":"Leave empty to disable authentication","ui.leave_empty_if_not_required":"Leave empty if not required","ui.optional_description_or_note":"Optional description or note","ui.loading":"Loading...","ui.loading_config":"Loading configuration...","ui.no_config":"Unable to load configuration","ui.logout":"Logout","ui.auth.logging_in":"Logging in...","ui.auth.login_failed":"Login failed","tab.general":"General","tab.webui":"WebUI","tab.nonebot":"NoneBot","tab.api":"API","tab.subs":"Subscriptions","config.version":"Plugin Version","config.version.desc":"Plugin version","config.webui.title":"WebUI Configuration","config.webui.desc":"Configure the web interface settings","config.webui.enable":"Enable WebUI","config.webui.enable.desc":"Whether to enable WebUI","config.webui.api_path":"WebUI Mount Path","config.webui.api_path.desc":"WebUI mount path","config.webui.api_access_token":"WebUI Token","config.webui.api_access_token.desc":"WebUI Token","config.webui.jwt_secret_key":"JWT Secret Key","config.webui.jwt_secret_key.desc":"Secret key for JWT signing, must be changed in production","config.nonebot.title":"NoneBot Configuration","config.nonebot.desc":"Configure bot behavior and commands","config.nonebot.block":"Block Events","config.nonebot.block.desc":"Whether to block events (prevent other plugins from processing)","config.nonebot.fallback":"Enable Fallback","config.nonebot.fallback.desc":"Whether to enable Alconna fallback mechanism","config.nonebot.enable_self":"Respond to Self","config.nonebot.enable_self.desc":"Whether to respond to self messages","config.nonebot.only_self":"Only Self Messages","config.nonebot.only_self.desc":"Only respond to self messages, overrides all other rules","config.nonebot.only_to_me":"Only @ Bot","config.nonebot.only_to_me.desc":"Require @ bot or nickname to respond","config.nonebot.command_to_me":"Commands Need @","config.nonebot.command_to_me.desc":"Commands require @ bot or nickname","config.nonebot.cmd_start":"Command Start Word","config.nonebot.cmd_start.desc":"Command start word, can be empty","config.nonebot.cmd_aliases":"Command Aliases","config.nonebot.cmd_add_sub":"Subscribe Commands","config.nonebot.cmd_remove_sub":"Unsubscribe Commands","config.nonebot.cmd_add_sub_label":"Subscribe Commands","config.nonebot.cmd_remove_sub_label":"Unsubscribe Commands","config.api.title":"API Configuration","config.api.desc":"Configure API endpoints and settings","config.api.browser_shot_quality":"Browser Screenshot Quality","config.api.browser_shot_quality.desc":"Browser screenshot quality, range 10-100","config.api.api_health_check_interval":"API Health Check Interval","config.api.api_health_check_interval.desc":"API health check interval in seconds","config.api.request_api.title":"Request API List","config.api.request_api.desc":"Configure bilichat-request API endpoints","config.api.request_api.api":"API URL","config.api.request_api.token":"API Token","config.api.request_api.weight":"Weight","config.api.request_api.enable":"Enable","config.api.request_api.note":"Note","config.api.request_api.api.desc":"API URL","config.api.request_api.token.desc":"API Token, leave empty if server doesn't require","config.api.request_api.weight.desc":"Weight for load balancing, higher values have priority","config.api.request_api.enable.desc":"Whether to enable this endpoint","config.api.request_api.note.desc":"Optional note or description","config.analyze.title":"Content Analysis Configuration","config.analyze.desc":"Configure what content types to analyze","config.analyze.video":"Analyze Videos","config.analyze.video.desc":"Whether to analyze videos","config.analyze.dynamic":"Analyze Dynamics","config.analyze.dynamic.desc":"Whether to analyze dynamics","config.analyze.column":"Analyze Columns","config.analyze.column.desc":"Whether to analyze columns","config.analyze.cd_time":"Response Cooldown Time","config.analyze.cd_time.desc":"Response cooldown time for same video (prevent spam)","config.subs.title":"Subscription Configuration","config.subs.desc":"Configure polling intervals and push settings","config.subs.dynamic_interval":"Dynamic Polling Interval","config.subs.dynamic_interval.desc":"Dynamic polling interval in seconds","config.subs.live_interval":"Live Polling Interval","config.subs.live_interval.desc":"Live polling interval in seconds","config.subs.push_delay":"Push Delay","config.subs.push_delay.desc":"Delay between each push in seconds","config.subs.users":"Subscribed Users"}};function r(e){let{children:i}=e,[n,r]=(0,t.useState)("zh");return(0,a.jsx)(s.Provider,{value:{language:n,setLanguage:r,t:(e,i)=>o[n][e]||i||e},children:i})}function c(){let e=(0,t.useContext)(s);if(void 0===e)throw Error("useI18n must be used within an I18nProvider");return e}},7769:(e,i,n)=>{Promise.resolve().then(n.bind(n,389))}},e=>{var i=i=>e(e.s=i);e.O(0,[310,441,684,358],()=>i(7769)),_N_E=e.O()}]);